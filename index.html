<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Animated Click Counter</title>
<style>
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background: linear-gradient(45deg, #0f2027, #203a43, #2c5364);
    color: #fff;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
  }
  h1 {
    font-size: 3rem;
    text-align: center;
    margin-bottom: 2rem;
    animation: fadeIn 2s ease forwards;
  }
  #clickBtn {
    padding: 1rem 2rem;
    font-size: 1.5rem;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: #ff416c;
    color: #fff;
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative;
    z-index: 1;
  }
  #clickBtn:hover {
    transform: scale(1.2);
    box-shadow: 0 0 20px #ff416c;
  }
  #count {
    font-size: 2rem;
    margin-top: 1rem;
    animation: pulse 1s infinite;
  }
  @keyframes pulse {
    0% { transform: scale(1); color: #fff; }
    50% { transform: scale(1.3); color: #ff416c; }
    100% { transform: scale(1); color: #fff; }
  }
  @keyframes fadeIn {
    0% { opacity: 0; transform: translateY(-20px);}
    100% { opacity: 1; transform: translateY(0);}
  }
  canvas {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
  }
</style>
</head>
<body>

<h1>Click the Button!</h1>
<button id="clickBtn">Click me</button>
<p>Clicks: <span id="count">0</span></p>
<canvas id="confetti"></canvas>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
  // ==== FIREBASE CONFIG ==== //
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const countRef = db.ref('clicks');

  const button = document.getElementById('clickBtn');
  const counter = document.getElementById('count');

  // Load current clicks
  countRef.on('value', (snapshot) => {
    const data = snapshot.val();
    counter.textContent = data || 0;
  });

  // ==== CONFETTI SETUP ==== //
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  let confettiParticles = [];

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  function createConfetti(x, y) {
    for (let i = 0; i < 30; i++) {
      confettiParticles.push({
        x: x,
        y: y,
        vx: (Math.random() - 0.5) * 6,
        vy: Math.random() * -8 - 2,
        color: `hsl(${Math.random()*360},100%,50%)`,
        size: Math.random() * 6 + 4,
        life: 100
      });
    }
  }

  function updateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confettiParticles.forEach((p, i) => {
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.2; // gravity
      p.life--;
      ctx.fillStyle = p.color;
      ctx.fillRect(p.x, p.y, p.size, p.size);
      if (p.life <= 0 || p.y > canvas.height) confettiParticles.splice(i, 1);
    });
    requestAnimationFrame(updateConfetti);
  }
  updateConfetti();

  // ==== BUTTON CLICK ==== //
  button.addEventListener('click', () => {
    // Firebase click
    countRef.transaction(current => (current || 0) + 1);
    // Animate button
    button.style.transform = "scale(1.5)";
    setTimeout(() => button.style.transform = "scale(1)", 150);
    // Trigger confetti
    const rect = button.getBoundingClientRect();
    createConfetti(rect.left + rect.width/2, rect.top + rect.height/2);
  });
</script>

</body>
</html>